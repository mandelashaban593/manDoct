define(["backbone","views/message","channel"],function(e,t,n){return e.View.extend({tagName:"div",className:"chatMsgs",initialize:function(){$(".chatBox").html(this.el),this.collection.on("add",this.addOne,this),n.on("addMsg",this.addMsg,this),this.render(),$("html, body").animate({scrollTop:$(document).height()},1e3)},render:function(){return this.collection.each(this.addone,this),this},addOne:function(e){var n=new t({model:e});this.$el.append(n.render().el),$(window).scrollTop()+$(window).height()>$(document).height()-100&&$("html, body").animate({scrollTop:$(document).height()},500)},addone:function(e){var n=new t({model:e});this.$el.append(n.render().el)},addMsg:function(e){this.collection.create({msg:e},{wait:!0})}})});